# GUI 명세서
프로젝트명: Next.js + TipTap 기반 Markdown 에디터

## 1. 문서 목적
본 문서는 Next.js + TipTap 기반 Markdown 에디터의 GUI 구성, 화면 요소, 상호작용,
상태 변화, 접근성 및 예외 처리 규칙을 정의한다.
문서의 목적은 구현 일관성 확보와 QA 검증 기준 제공이다.

---

## 2. 화면 구성 개요

### 2.1 레이아웃
- 2열 레이아웃을 기본으로 한다.
  - 좌측: TipTap Editor (리치 편집 영역)
  - 우측: Markdown 텍스트 영역 (직렬화 결과 및 수동 편집)
- 상단: 툴바(버튼 그룹)
- 모바일 또는 좁은 화면에서는 1열로 스택 형태를 지원할 수 있다.
  - 상단: 툴바
  - 중단: TipTap Editor
  - 하단: Markdown 텍스트 영역

### 2.2 화면 요소 목록
- E-TOOLBAR: 상단 툴바 컨테이너
- E-BTN-BOLD: 굵게 토글 버튼
- E-BTN-ITALIC: 기울임 토글 버튼
- E-BTN-STRIKE: 취소선 토글 버튼
- E-BTN-H1 ~ H3: 제목 레벨 설정 버튼
- E-BTN-UL: 글머리 기호 목록 토글 버튼
- E-BTN-OL: 번호 매기기 목록 토글 버튼
- E-BTN-QUOTE: 인용구 토글 버튼
- E-BTN-HR: 구분선 삽입 버튼
- E-BTN-UNDO/REDO: 실행 취소/다시 실행 버튼
- E-BTN-CODE: 코드블럭 토글 버튼
- E-BTN-IMG: 이미지 업로드 버튼
- E-BTN-MD-APPLY: Markdown -> 에디터 반영 버튼
- E-BTN-MD-SAVE: md 파일 저장 버튼
- E-INP-IMG: 이미지 파일 입력(hidden)
- E-EDITOR: TipTap 편집 영역
- E-MD-TEXTAREA: Markdown 텍스트 영역
- E-HELP: 상태 안내/오류 메시지 영역(권장)

---

## 3. 툴바 GUI 명세

### 3.1 텍스트 서식 버튼 그룹 (Bold, Italic, Strike)
- 구성:
  - **Bold** (E-BTN-BOLD)
  - *Italic* (E-BTN-ITALIC)
  - ~~Strike~~ (E-BTN-STRIKE)
- 동작:
  - 선택 영역 또는 커서 위치의 텍스트 스타일을 토글한다.
- 상태:
  - 활성(Active): 커서가 해당 스타일 내부에 있을 때 시각적으로 강조된다.

### 3.2 문단 서식 버튼 그룹 (Heading, List, Quote)
- 구성:
  - **H1, H2, H3** (E-BTN-H#: 제목)
  - **Bullet List** (E-BTN-UL)
  - **Ordered List** (E-BTN-OL)
  - **Blockquote** (E-BTN-QUOTE)
- 동작:
  - 현재 문단의 타입을 해당 서식으로 변경/토글한다.
- 상태:
  - 활성(Active): 커서가 해당 문단 타입일 때 시각적으로 강조된다.

### 3.3 편집 도구 그룹 (HR, Undo, Redo)
- 구성:
  - **Horizontal Rule** (E-BTN-HR): 구분선 삽입
  - **Undo** (E-BTN-UNDO): 실행 취소
  - **Redo** (E-BTN-REDO): 다시 실행
- 상태:
  - Undo/Redo Disabled: 히스토리가 없을 경우 비활성화된다.

### 3.4 코드블럭 버튼(E-BTN-CODE)
- 라벨: 코드블럭
- 동작:
  - 클릭 시 현재 커서/선택 영역에 대해 코드블럭 토글을 수행한다.
- 상태:
  - 활성 상태(권장): 커서가 코드블럭 내부일 때 active 스타일 적용
  - 비활성 상태: 에디터가 초기화되지 않은 경우 disabled

### 3.2 이미지 업로드 버튼(E-BTN-IMG)
- 라벨: 이미지 업로드
- 동작:
  - 클릭 시 파일 선택 다이얼로그를 호출한다(E-INP-IMG 트리거).
- 상태:
  - 에디터 미초기화 시 disabled
  - 업로드 진행 중 상태(권장): 로딩 표시 및 연속 클릭 제한

### 3.3 Markdown -> 에디터 반영 버튼(E-BTN-MD-APPLY)
- 라벨: Markdown -> 에디터 반영
- 동작:
  - Markdown 텍스트 영역의 내용을 에디터에 setContent로 반영한다.
- 상태:
  - 에디터 미초기화 시 disabled
  - 반영 중(권장): 로딩 표시

### 3.4 md 파일 저장 버튼(E-BTN-MD-SAVE)
- 라벨: .md로 저장
- 동작:
  - 현재 Markdown 상태를 content.md 파일로 다운로드한다.
- 상태:
  - Markdown 문자열이 비어 있어도 동작 가능
  - 다운로드 실패(권장): 오류 메시지 표기

### 3.5 파일 입력(E-INP-IMG)
- 타입: file
- 표시: 숨김(hidden)
- 허용 형식: image/*
- 동작:
  - 파일 선택 시 업로드 API 호출 후 에디터에 이미지 삽입

---

## 4. 본문 GUI 명세

### 4.1 TipTap 편집 영역(E-EDITOR)
- 역할:
  - 리치 편집을 수행하는 주요 영역
- 입력:
  - 일반 텍스트 입력
  - 코드블럭 생성/편집
  - 이미지 삽입
  - 드래그 앤 드롭 이미지 업로드
  - 붙여넣기 이미지 업로드
- 시각 스타일(권장):
  - 최소 높이: 240px 이상
  - border 및 padding 적용
  - focus 상태 outline 표시 또는 강조

### 4.2 Markdown 텍스트 영역(E-MD-TEXTAREA)
- 역할:
  - 에디터의 Markdown 직렬화 결과 표시
  - 사용자가 직접 Markdown을 편집할 수 있는 입력 영역
- 입력:
  - 사용자 직접 편집
- 동기화:
  - 에디터 내용 변경 시 자동으로 업데이트된다.
  - 사용자가 Markdown을 편집한 뒤에는 버튼(E-BTN-MD-APPLY)을 통해 에디터에 반영한다.
- 시각 스타일(권장):
  - monospace 폰트
  - 최소 높이: 240px 이상

---

## 5. 상호작용(Interaction) 명세

### 5.1 Editor -> Markdown 자동 갱신
- 트리거:
  - 에디터에서 텍스트 입력, 삭제, 이미지 삽입, 코드블럭 변경 등 콘텐츠 변경 발생
- 결과:
  - Markdown 텍스트 영역이 즉시 갱신된다.
- 품질 기준:
  - 내용 손실이 없어야 한다.
  - 코드블럭은 fenced code 규칙으로 저장되어야 한다.
  - 이미지는 Markdown 이미지 문법으로 저장되어야 한다.

### 5.2 Markdown -> Editor 반영
- 트리거:
  - 사용자가 Markdown 텍스트 영역을 수정하고 반영 버튼을 클릭
- 결과:
  - 에디터 내용이 Markdown에 맞게 재구성된다.
- 주의:
  - 반영 동작 후 에디터 업데이트가 발생하여 Markdown이 다시 갱신될 수 있다.

### 5.3 드래그 앤 드롭 이미지
- 트리거:
  - 이미지 파일을 에디터 영역에 드롭
- 결과:
  - 기본 삽입 동작을 차단하고 업로드 후 이미지 노드를 드롭 위치에 삽입한다.
- 오류 처리:
  - 업로드 실패 시 삽입하지 않으며, 에디터는 편집 가능 상태를 유지한다.

### 5.4 붙여넣기 이미지
- 트리거:
  - 클립보드에 이미지 파일 또는 HTML img 태그가 있는 상태에서 붙여넣기
- 결과:
  - 기본 삽입 동작을 차단하고 업로드 후 이미지 노드를 커서 위치에 삽입한다.
- 정책:
  - data URL 이미지는 File 변환 후 업로드한다.
  - 외부 URL 이미지는 fetch 가능할 때만 업로드하며 실패 시 삽입하지 않는다.
  - 동일 이벤트 내 중복 이미지는 1회만 삽입한다.

---

## 6. 상태 및 메시지 GUI 명세

### 6.1 로딩 상태(권장)
- 이미지 업로드 중:
  - 이미지 업로드 버튼에 로딩 표시
  - 중복 클릭 제한
  - 필요 시 진행 메시지 표시

### 6.2 오류 메시지(E-HELP 권장)
- 업로드 실패:
  - 사용자에게 오류 메시지를 표시한다.
- 외부 URL fetch 실패:
  - 정책상 삽입 생략이므로 선택적으로 안내 메시지를 표시할 수 있다.

---

## 7. 접근성(Accessibility) 명세

### 7.1 키보드 접근
- 모든 버튼은 Tab으로 포커스 이동 가능해야 한다.
- Enter 또는 Space로 클릭 동작이 가능해야 한다.

### 7.2 레이블 및 안내
- 버튼에는 명확한 라벨 텍스트가 있어야 한다.
- 파일 입력은 시각적으로 숨겨도 버튼 라벨로 기능이 인지 가능해야 한다.

### 7.3 포커스 표시
- 에디터 영역과 주요 버튼은 포커스 표시가 필요하다.

---

## 8. 반응형(Responsive) 명세

### 8.1 Desktop
- 2열(에디터/Markdown) 레이아웃을 기본으로 한다.

### 8.2 Mobile
- 1열 스택 레이아웃을 기본으로 한다.
- 툴바 버튼은 줄바꿈 또는 스크롤로 접근 가능해야 한다.

---

## 9. 범위 외 GUI 항목
- 실시간 협업 UI
- 댓글 UI
- 문서 목록/버전 관리 UI
- 사용자 인증 UI
- AI 작성 UI

위 항목은 본 GUI 명세서 범위에 포함되지 않는다.
